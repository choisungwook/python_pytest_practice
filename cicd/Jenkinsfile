pipeline {
    agent any
    stages {
        stage('Test') {
            steps {
                sh 'ls'
                sh """
                    docker run --rm \\
                    -v /mnt/data/jenkins/workspace/$JOB_NAME:/tmp/$JOB_BASE_NAME \\
                    python:3.9.1 \\
                    cd /tmp/$JOB_BASE_NAME && pip install -r requirements.txt && python -m pytest --cov-report term --cov=./ tests/
                """
                sh 'echo done'
            }
        }
    }
}